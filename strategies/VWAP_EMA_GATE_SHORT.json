{
    "pattern_id": "VWAP_EMA_GATE_SHORT",
    "regime_config": {
        "BEARISH": {
            "allow_entry": true,
            "quantity_mod": 1.5,
            "tp_mult": 2.0
        },
        "SIDEWAYS": {
            "allow_entry": true,
            "quantity_mod": 1.0,
            "tp_mult": 1.5
        }
    },
    "phases": [
        {
            "id": "SETUP",
            "conditions": [
                "close < vwap(history)",
                "close < ema(history, 9, 'close')"
            ],
            "capture": {
                "setup_ema": "ema(history, 9, 'close')",
                "setup_vwap": "vwap(history)"
            },
            "timeout": 0
        },
        {
            "id": "TRIGGER",
            "conditions": [
                "volume > moving_avg(history, 20, 'volume') * 1.5",
                "close < vars.setup_ema"
            ],
            "capture": {},
            "timeout": 0
        }
    ],
    "execution": {
        "side": "SELL",
        "entry": "close",
        "sl": "highest(history, 5, 'high')",
        "tp": "close - (sl - close) * 2.0",
        "option_selection": "ATM_PUT"
    }
}