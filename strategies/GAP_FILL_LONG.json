{
    "pattern_id": "GAP_FILL_LONG",
    "description": "Morning gap fill setup. If price opens below previous close and shows strength, play the gap fill.",
    "regime_config": {
        "COMPLETE_BULLISH": {
            "allow_entry": true,
            "quantity_mod": 2.0,
            "tp_mult": 3.5
        },
        "BULLISH": {
            "allow_entry": true,
            "quantity_mod": 1.5,
            "tp_mult": 2.0
        },
        "SIDEWAYS": {
            "allow_entry": true,
            "quantity_mod": 1.0,
            "tp_mult": 1.5
        },
        "BEARISH": {
            "allow_entry": false
        },
        "COMPLETE_BEARISH": {
            "allow_entry": false
        }
    },
    "phases": [
        {
            "id": "SMART_FILTER",
            "conditions": [
                "sentiment.smart_trend in ['Long Buildup', 'Short Covering', 'Neutral']"
            ],
            "capture": {},
            "timeout": 0
        },
        {
            "id": "GAP_IDENTIFICATION",
            "conditions": [
                "time_is_between(timestamp, '09:15', '09:30')",
                "open < prev_day_close() * 0.998"
            ],
            "capture": {
                "target_price": "prev_day_close()"
            },
            "timeout": 0
        },
        {
            "id": "TRIGGER",
            "conditions": [
                "close > moving_avg(history, 5, 'close')",
                "sentiment.smart_trend in ['Long Buildup', 'Short Covering']"
            ],
            "capture": {},
            "timeout": 15
        }
    ],
    "execution": {
        "side": "BUY",
        "entry": "close",
        "sl": "lowest(history, 5, 'low')",
        "tp": "vars.target_price",
        "option_selection": "ATM_CALL"
    }
}